"use strict";(self["webpackChunkfitoagro_backoffice"]=self["webpackChunkfitoagro_backoffice"]||[]).push([[238],{4823:function(e,o,l){l.r(o),l.d(o,{default:function(){return ae}});var t=l(6768),a=l(2807),r=l(3813),i=l(6756),n=l(5526),s=l(9669),d=l(9336),c=l(1146),u=l(3948);function m(e,o,l,m,p,h){const b=(0,t.g2)("AddProtocol"),y=(0,t.g2)("ProtocolCard");return(0,t.uX)(),(0,t.Wv)(r.I,null,{default:(0,t.k6)((()=>[(0,t.bF)(i.L,{class:"d-flex justify-center"},{default:(0,t.k6)((()=>[(0,t.bF)(n.B,{sm:"12",md:"10",lg:"10",xl:"6",class:"d-flex align-center"},{default:(0,t.k6)((()=>[(0,t.bF)(a.D,{class:"mt-4 mr-2",color:"secondary",size:"large",icon:"",variant:"text",onClick:h.refreshProtocols},{default:(0,t.k6)((()=>[(0,t.bF)(s.w,null,{default:(0,t.k6)((()=>[(0,t.eW)(" mdi-refresh ")])),_:1})])),_:1},8,["onClick"]),(0,t.bF)(u.W,{modelValue:p.filter.name,"onUpdate:modelValue":o[0]||(o[0]=e=>p.filter.name=e),color:"secondary",placeholder:"Pesquise o nome do Protocolo",density:"comfortable",variant:"solo","hide-details":"",class:"mt-5",disabled:p.isLoading,"prepend-inner-icon":"mdi-magnify"},null,8,["modelValue","disabled"]),m.accountStore.hasRole(["Administrador"])?((0,t.uX)(),(0,t.Wv)(b,{key:0,eoitypes:p.eoiTypes,onRefresh:h.refreshProtocols},null,8,["eoitypes","onRefresh"])):(0,t.Q3)("",!0)])),_:1})])),_:1}),(0,t.bF)(i.L,null,{default:(0,t.k6)((()=>[(0,t.bF)(n.B,{cols:"12"},{default:(0,t.k6)((()=>[(0,t.bF)(i.L,{class:"d-flex justify-center scrollable"},{default:(0,t.k6)((()=>[(0,t.bF)(n.B,{sm:"12",md:"10",lg:"10",xl:"6"},{default:(0,t.k6)((()=>[(0,t.bF)(c.i,{height:h.sheetHeight},{default:(0,t.k6)((()=>[p.isLoading?((0,t.uX)(),(0,t.Wv)(d.Z,{key:0,color:"primary",indeterminate:""})):((0,t.uX)(),(0,t.Wv)(i.L,{key:1,class:"ml-1"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(h.protocolsToShow,((e,o)=>((0,t.uX)(),(0,t.Wv)(n.B,{key:o,cols:"12"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{protocol:e,eoitypes:p.eoiTypes},null,8,["protocol","eoitypes"])])),_:2},1024)))),128))])),_:1}))])),_:1},8,["height"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var p=l(4232),h=l(5130),b=l(4593),y=l(1606),f=l(697),v=l(7511),g=l(1161),k=l(9562);const F={class:"d-flex align-center"};function _(e,o,l,r,i,n){const d=(0,t.g2)("ProtocolForm");return(0,t.uX)(),(0,t.Wv)(b.J,null,{default:(0,t.k6)((()=>[(0,t.bF)(y.r,{class:"d-flex justify-space-between align-center"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",F,[(0,t.Lk)("span",null,(0,p.v_)(l.protocol.name),1)]),(0,t.bF)(a.D,{variant:"plain",color:"primary",icon:"",onClick:o[0]||(o[0]=e=>i.show=!i.show)},{default:(0,t.k6)((()=>[(0,t.bF)(s.w,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,p.v_)(i.show?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1}),(0,t.bF)(g.y,{activator:"parent",location:"right"},{default:(0,t.k6)((()=>[(0,t.Lk)("span",null,(0,p.v_)(i.show?"Ocultar Detalhes":"Mostrar Detalhes"),1)])),_:1})])),_:1})])),_:1}),(0,t.bF)(k.Qo,null,{default:(0,t.k6)((()=>[(0,t.bo)((0,t.Lk)("div",null,[(0,t.bF)(v.G),(0,t.bF)(f.O,null,{default:(0,t.k6)((()=>[(0,t.bF)(d,{protocol:l.protocol,eoitypes:l.eoitypes,readonly:""},null,8,["protocol","eoitypes"])])),_:1})],512),[[h.aG,i.show]])])),_:1})])),_:1})}var V=l(2239),P=l(1560),w=l(105);const L=e=>((0,t.Qi)("data-v-4e840bc8"),e=e(),(0,t.jt)(),e),S=L((()=>(0,t.Lk)("span",{class:"text-h6 mx-2"},"Protocolo",-1))),E=L((()=>(0,t.Lk)("span",{class:"text-subtitle-1 mx-2 whitespace-nowrap"},"EOIs a estudar",-1))),x=L((()=>(0,t.Lk)("span",{class:"text-subtitle-1 mx-2 whitespace-nowrap"},"Observações",-1)));function W(e,o,l,d,c,m){const p=(0,t.g2)("ProtocolObservationCard");return(0,t.uX)(),(0,t.Wv)(P.n,{modelValue:m.localFormValid,"onUpdate:modelValue":o[5]||(o[5]=e=>m.localFormValid=e)},{default:(0,t.k6)((()=>[(0,t.bF)(b.J,{elevation:"0",class:"scrollable"},{default:(0,t.k6)((()=>[l.createMode?((0,t.uX)(),(0,t.Wv)(y.r,{key:0},{default:(0,t.k6)((()=>[(0,t.bF)(i.L,null,{default:(0,t.k6)((()=>[(0,t.bF)(n.B,{cols:"12",class:"d-flex align-center justify-space-between"},{default:(0,t.k6)((()=>[(0,t.bF)(v.G),S,(0,t.bF)(v.G)])),_:1}),(0,t.bF)(n.B,{cols:"6"},{default:(0,t.k6)((()=>[(0,t.bF)(u.W,{modelValue:m.localProtocol.name,"onUpdate:modelValue":o[0]||(o[0]=e=>m.localProtocol.name=e),modelModifiers:{trim:!0},label:"Nome",placeholder:"Insira o nome do protocolo","prepend-inner-icon":"mdi-tag-text-outline",readonly:l.readonly,density:"compact",color:"primary",variant:"outlined",rules:[c.rules.required,c.rules.maxLength]},null,8,["modelValue","readonly","rules"])])),_:1}),(0,t.bF)(n.B,{cols:"2"},{default:(0,t.k6)((()=>[(0,t.bF)(u.W,{modelValue:m.localProtocol.code,"onUpdate:modelValue":o[1]||(o[1]=e=>m.localProtocol.code=e),modelModifiers:{trim:!0},label:"Código",placeholder:"Insira o código do protocolo","prepend-inner-icon":"mdi-tag-outline",readonly:l.readonly,density:"compact",color:"primary",variant:"outlined",rules:[c.rules.required,c.rules.code]},null,8,["modelValue","readonly","rules"])])),_:1}),(0,t.bF)(n.B,{cols:"1",class:"text-center"},{default:(0,t.k6)((()=>[(0,t.bF)(v.G,{length:"50",vertical:""})])),_:1}),(0,t.bF)(n.B,{cols:"3"},{default:(0,t.k6)((()=>[(0,t.bF)(V.V,{modelValue:m.localProtocol.enemy,"onUpdate:modelValue":o[2]||(o[2]=e=>m.localProtocol.enemy=e),items:c.enemies,"item-title":"enemy_name","item-value":"enemy_id",label:"Inimigo",placeholder:"Selecione o inimigo","prepend-inner-icon":"mdi-bug-outline",readonly:l.readonly,"hide-details":l.readonly,density:"compact",color:"primary",variant:"outlined",loading:c.isLoadingEnemies,rules:[c.rules.required]},null,8,["modelValue","items","readonly","hide-details","loading","rules"])])),_:1})])),_:1})])),_:1})):(0,t.Q3)("",!0),(0,t.bF)(f.O,null,{default:(0,t.k6)((()=>[(0,t.bF)(i.L,null,{default:(0,t.k6)((()=>[(0,t.bF)(n.B,{cols:"12",class:"d-flex align-center justify-space-between"},{default:(0,t.k6)((()=>[(0,t.bF)(v.G),E,(0,t.bF)(v.G)])),_:1}),(0,t.bF)(n.B,{cols:"4"},{default:(0,t.k6)((()=>[(0,t.bF)(w.d4,{modelValue:m.localProtocol.eoi.name,"onUpdate:modelValue":o[3]||(o[3]=e=>m.localProtocol.eoi.name=e),items:l.eoitypes,"item-title":"eoitype_name","item-value":"eoitype_name",label:"Tipo de EOI",placeholder:"Selecione o tipo de EOI","prepend-inner-icon":"mdi-map-marker-alert-outline",readonly:l.readonly,"hide-details":l.readonly,density:"compact",color:"primary",variant:"outlined",rules:[c.rules.required]},null,8,["modelValue","items","readonly","hide-details","rules"])])),_:1}),(0,t.bF)(n.B,{cols:"2"},{default:(0,t.k6)((()=>[(0,t.bF)(u.W,{modelValue:m.localProtocol.eoi.number,"onUpdate:modelValue":o[4]||(o[4]=e=>m.localProtocol.eoi.number=e),modelModifiers:{number:!0},label:"Nº eois",type:"number",suffix:"eois",readonly:l.readonly,"hide-details":l.readonly,density:"compact",color:"primary",variant:"outlined",rules:[c.rules.required,c.rules.naturalNumber]},null,8,["modelValue","readonly","hide-details","rules"])])),_:1})])),_:1}),(0,t.bF)(n.B,{cols:"12",class:"d-flex align-center justify-space-between"},{default:(0,t.k6)((()=>[(0,t.bF)(v.G),x,(0,t.bF)(v.G)])),_:1}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(m.localProtocol.observations,((e,o)=>((0,t.uX)(),(0,t.Wv)(n.B,{cols:"12",key:o,class:"d-flex align-center justify-space-between"},{default:(0,t.k6)((()=>[(0,t.bF)(a.D,{icon:`mdi-numeric-${o+1}`,color:"secondary",readonly:"",size:"small",variant:"tonal"},null,8,["icon"]),(0,t.bF)(r.I,{class:"py-0"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{observation:e,readonly:l.readonly},null,8,["observation","readonly"])])),_:2},1024),l.editMode||l.createMode?((0,t.uX)(),(0,t.Wv)(a.D,{key:0,icon:"mdi-close",color:"error",size:"small",variant:"tonal",onClick:e=>m.localProtocol.observations.splice(o,1)},null,8,["onClick"])):(0,t.Q3)("",!0)])),_:2},1024)))),128)),l.editMode||l.createMode?((0,t.uX)(),(0,t.Wv)(n.B,{key:0,cols:"12",class:"d-flex align-center justify-space-between"},{default:(0,t.k6)((()=>[(0,t.bF)(a.D,{icon:"mdi-plus",color:"secondary",readonly:"",size:"small",variant:"tonal"}),(0,t.bF)(r.I,{class:"py-0"},{default:(0,t.k6)((()=>[(0,t.bF)(a.D,{color:"primary",variant:"tonal",block:"",size:"large",onClick:m.pushObservation},{default:(0,t.k6)((()=>[(0,t.bF)(s.w,null,{default:(0,t.k6)((()=>[(0,t.eW)("mdi-plus")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})):(0,t.Q3)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"])}l(4114);function C(e,o,l,r,d,c){return(0,t.uX)(),(0,t.Wv)(b.J,null,{default:(0,t.k6)((()=>[(0,t.bF)(y.r,{class:"d-flex justify-space-between align-center"},{default:(0,t.k6)((()=>[(0,t.bF)(i.L,null,{default:(0,t.k6)((()=>[(0,t.bF)(n.B,{cols:"6"},{default:(0,t.k6)((()=>[(0,t.bF)(u.W,{modelValue:c.localObservation.name,"onUpdate:modelValue":o[0]||(o[0]=e=>c.localObservation.name=e),label:"Nome da Observação",placeholder:"Insira o nome da observação","prepend-inner-icon":"mdi-eye",readonly:l.readonly,"hide-details":l.readonly,density:"compact",color:"secondary",variant:"outlined",rules:[d.rules.required,d.rules.maxLength]},null,8,["modelValue","readonly","hide-details","rules"])])),_:1})])),_:1}),(0,t.bF)(a.D,{variant:"plain",color:"primary",icon:"",onClick:o[1]||(o[1]=e=>d.show=!d.show)},{default:(0,t.k6)((()=>[(0,t.bF)(s.w,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,p.v_)(d.show?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1}),(0,t.bF)(g.y,{activator:"parent",location:"right"},{default:(0,t.k6)((()=>[(0,t.Lk)("span",null,(0,p.v_)(d.show?"Ocultar Etapas":"Mostrar Etapas"),1)])),_:1})])),_:1})])),_:1}),(0,t.bF)(k.Qo,null,{default:(0,t.k6)((()=>[(0,t.bo)((0,t.Lk)("div",null,[(0,t.bF)(v.G),(0,t.bF)(f.O,null,{default:(0,t.k6)((()=>[(0,t.bF)(i.L,null,{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(c.localObservation.iterations,((e,o)=>((0,t.uX)(),(0,t.Wv)(n.B,{cols:"12",key:o,class:"d-flex align-top justify-space-between"},{default:(0,t.k6)((()=>[(0,t.bF)(a.D,{class:"mr-4",icon:`mdi-numeric-${o+1}`,color:"secondary",readonly:"",size:"small",variant:"tonal"},null,8,["icon"]),(0,t.bF)(i.L,{align:"center"},{default:(0,t.k6)((()=>[(0,t.bF)(n.B,{cols:"5"},{default:(0,t.k6)((()=>[(0,t.bF)(u.W,{modelValue:e.name,"onUpdate:modelValue":o=>e.name=o,modelModifiers:{trim:!0},label:"Nome da Etapa",placeholder:"Insira o nome da etapa",readonly:l.readonly,"hide-details":l.readonly,density:"compact",color:"secondary",variant:"outlined",rules:[d.rules.required,d.rules.maxLength]},null,8,["modelValue","onUpdate:modelValue","readonly","hide-details","rules"])])),_:2},1024),(0,t.bF)(n.B,null,{default:(0,t.k6)((()=>[(0,t.bF)(w.d4,{cols:"3",modelValue:e.data_type,"onUpdate:modelValue":o=>e.data_type=o,items:[{title:"Quantitativo",value:1},{title:"Qualitativo",value:0}],label:"Tipo de Dado","item-title":"title","item-value":"value",readonly:l.readonly,"hide-details":l.readonly,density:"compact",color:"secondary",variant:"outlined",rules:[d.rules.required]},null,8,["modelValue","onUpdate:modelValue","readonly","hide-details","rules"])])),_:2},1024),1==e.data_type?((0,t.uX)(),(0,t.Wv)(n.B,{key:0,cols:"3"},{default:(0,t.k6)((()=>[(0,t.bF)(u.W,{modelValue:e.units,"onUpdate:modelValue":o=>e.units=o,modelModifiers:{trim:!0},label:"Unidades",readonly:l.readonly,"hide-details":l.readonly,density:"compact",color:"secondary",variant:"outlined",rules:[d.rules.required,d.rules.maxLength]},null,8,["modelValue","onUpdate:modelValue","readonly","hide-details","rules"])])),_:2},1024)):(0,t.Q3)("",!0)])),_:2},1024),l.readonly?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(a.D,{key:0,class:"mx-2",icon:"mdi-close",color:"error",size:"small",variant:"tonal",onClick:e=>c.localObservation.iterations.splice(o,1)},null,8,["onClick"]))])),_:2},1024)))),128)),l.readonly?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(n.B,{key:0,cols:"12",class:"d-flex align-top justify-space-between"},{default:(0,t.k6)((()=>[(0,t.bF)(a.D,{class:"mr-4",icon:"mdi-plus",color:"secondary",readonly:"",size:"small",variant:"tonal"}),(0,t.bF)(i.L,{align:"center"},{default:(0,t.k6)((()=>[(0,t.bF)(n.B,{cols:"12"},{default:(0,t.k6)((()=>[(0,t.bF)(a.D,{color:"primary",variant:"tonal",block:"",size:"large",onClick:c.pushIteration},{default:(0,t.k6)((()=>[(0,t.bF)(s.w,null,{default:(0,t.k6)((()=>[(0,t.eW)("mdi-plus")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}))])),_:1})])),_:1})],512),[[h.aG,d.show]])])),_:1})])),_:1})}var O={name:"ProtocolObservationCard",props:{observation:{type:Object,required:!0},readonly:{type:Boolean,default:!1}},data(){return{show:!1,rules:{required:e=>!!e||"Campo obrigatório.",maxLength:e=>e&&e.length<=25||"Máximo de 25 caracteres"}}},computed:{localObservation:{get(){return this.observation},set(e){console.log(e),this.$emit("update:observation",e)}}},methods:{pushIteration(){this.localObservation.iterations.push({name:"",data_type:null,units:"",value_type:"integer",max:5,min:0})}}},B=l(1241);const A=(0,B.A)(O,[["render",C]]);var D=A,q=l(6044),T=l(501),U=l(8355),I={name:"ProtocolForm",components:{ProtocolObservationCard:D},props:{protocol:Object,formValid:Boolean,readonly:Boolean,eoitypes:Array,editMode:Boolean,createMode:Boolean},setup(){const e=(0,q.E)(),o=(0,T.T)();return{accountStore:e,generalStore:o}},data(){return{enemies:[],isLoadingEnemies:!1,rules:{required:e=>!!e||"Campo obrigatório",maxLength:e=>e.length<=25||"O campo deve ter no máximo 25 caracteres",naturalNumber:e=>Number.isInteger(e)&&e>=0||"Número inválido",code:e=>e&&e.length<=3&&e.toUpperCase()===e||"Código inválido"},timeSelectItems:[{title:"30 min",value:30},{title:"1 hora",value:60},{title:"2 horas",value:120},{title:"3 horas",value:180},{title:"4 horas",value:240},{title:"5 horas",value:300},{title:"6 horas",value:360},{title:"7 horas",value:420},{title:"8 horas",value:480},{title:"9 horas",value:540},{title:"10 horas",value:600},{title:"11 horas",value:660},{title:"12 horas",value:720},{title:"13 horas",value:780},{title:"14 horas",value:840},{title:"15 horas",value:900},{title:"16 horas",value:960},{title:"17 horas",value:1020},{title:"18 horas",value:1080},{title:"19 horas",value:1140},{title:"20 horas",value:1200},{title:"21 horas",value:1260},{title:"22 horas",value:1320},{title:"23 horas",value:1380},{title:"24 horas",value:1440}]}},computed:{localProtocol:{get(){return this.protocol},set(e){this.$emit("update:protocol",e)}},localFormValid:{get(){return this.formValid},set(e){this.$emit("update:formValid",e)}}},methods:{pushObservation(){this.localProtocol.observations.push({name:null,iterations:[]})},async listEnemies(){this.isLoadingEnemies=!0,await U.A.request({url:"api/enemies",method:"GET",headers:{Authorization:"Bearer "+this.accountStore.account.token}}).then((e=>{this.enemies=e.data,this.isLoadingEnemies=!1})).catch((e=>{console.error(e),this.generalStore.errorSnackbar("Erro ao buscar inimigos"),this.isLoadingEnemies=!1}))}},mounted(){this.createMode&&this.listEnemies()}};const X=(0,B.A)(I,[["render",W],["__scopeId","data-v-4e840bc8"]]);var j=X,M={name:"ProtocolCard",components:{ProtocolForm:j},props:{protocol:{type:Object,required:!0},eoitypes:{type:Array,required:!0}},setup(){const e=(0,q.E)(),o=(0,T.T)();return{accountStore:e,generalStore:o}},data(){return{show:!1}},methods:{}};const G=(0,B.A)(M,[["render",_]]);var z=G,$=l(3745),N=l(1772);function Q(e,o,l,r,i,n){const s=(0,t.g2)("ProtocolForm");return(0,t.uX)(),(0,t.Wv)(N.p,{modelValue:n.localDialog,"onUpdate:modelValue":o[4]||(o[4]=e=>n.localDialog=e),onAfterLeave:o[5]||(o[5]=e=>n.reset()),width:"auto"},{default:(0,t.k6)((()=>[(0,t.bF)(b.J,{class:"mx-auto",width:"900"},{default:(0,t.k6)((()=>[(0,t.bF)(y.r,{class:"bg-secondary"},{default:(0,t.k6)((()=>[(0,t.eW)((0,p.v_)(n.localProtocol.name),1)])),_:1}),(0,t.bF)(f.O,null,{default:(0,t.k6)((()=>[(0,t.bF)(s,{protocol:n.localProtocol,eoitypes:l.eoitypes,formValid:i.formValid,"onUpdate:protocol":o[0]||(o[0]=e=>n.localProtocol=e),"onUpdate:formValid":o[1]||(o[1]=e=>i.formValid=e),editMode:""},null,8,["protocol","eoitypes","formValid"])])),_:1}),(0,t.bF)($.S,{class:"d-flex justify-space-around"},{default:(0,t.k6)((()=>[(0,t.bF)(a.D,{color:"error",variant:"tonal",icon:"mdi-close",onClick:o[2]||(o[2]=e=>n.localDialog=!1)}),(0,t.bF)(a.D,{color:"secondary",variant:"tonal",icon:"mdi-check",loading:i.isLoadingEdit,disabled:!i.formValid,onClick:o[3]||(o[3]=e=>n.editProtocol())},null,8,["loading","disabled"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}var J={name:"ProtocolEdit",components:{ProtocolForm:j},props:{protocol:{type:Object},dialog:{type:Boolean,required:!0},eoitypes:{type:Array,required:!0}},setup(){const e=(0,q.E)(),o=(0,T.T)();return{accountStore:e,generalStore:o}},data(){return{isLoadingEdit:!1,formValid:!1}},computed:{localProtocol:{get(){return this.protocol},set(e){this.$emit("update:protocol",e)}},localDialog:{get(){return this.dialog},set(e){this.$emit("update:dialog",e)}}},methods:{reset(){this.localProtocol=null},async editProtocol(){console.log(this.localProtocol);let e={...this.localProtocol};this.isLoadingEdit=!0,await U.A.request({url:`api/protocols/${this.localProtocol.name}`,method:"PATCH",headers:{Authorization:`Bearer ${this.accountStore.account.token}`},data:e}).then((()=>{this.isLoadingEdit=!1,this.generalStore.successSnackbar("Protocolo alterado com sucesso"),this.$emit("refresh"),this.localDialog=!1})).catch((e=>{this.isLoadingEdit=!1,this.generalStore.errorSnackbar("Erro ao alterar protocolo"),console.error(e)}))}}};const R=(0,B.A)(J,[["render",Q]]);var H=R,K=l(1720);function Z(e,o,l,r,i,n){const s=(0,t.g2)("ProtocolForm");return(0,t.uX)(),(0,t.Wv)(N.p,{modelValue:i.dialog,"onUpdate:modelValue":o[4]||(o[4]=e=>i.dialog=e),onAfterLeave:o[5]||(o[5]=e=>n.reset()),width:"auto",persistent:""},{activator:(0,t.k6)((({props:e})=>[(0,t.bF)(a.D,(0,t.v6)({color:"success",class:"ml-5 mt-5","append-icon":"mdi-plus"},e),{default:(0,t.k6)((()=>[(0,t.eW)("Novo Protocolo")])),_:2},1040)])),default:(0,t.k6)((({})=>[(0,t.bF)(b.J,{class:"mx-auto",width:"900"},{default:(0,t.k6)((()=>[(0,t.bF)(y.r,{class:"bg-success"},{default:(0,t.k6)((()=>[(0,t.eW)("Novo Protocolo")])),_:1}),(0,t.bF)(f.O,null,{default:(0,t.k6)((()=>[(0,t.bF)(s,{protocol:i.protocol,eoitypes:l.eoitypes,formValid:i.formValid,"onUpdate:protocol":o[0]||(o[0]=o=>e.localProtocol=o),"onUpdate:formValid":o[1]||(o[1]=e=>i.formValid=e),createMode:""},null,8,["protocol","eoitypes","formValid"])])),_:1}),(0,t.bF)(v.G),(0,t.bF)($.S,null,{default:(0,t.k6)((()=>[(0,t.bF)(a.D,{color:"error",variant:"tonal","prepend-icon":"mdi-close",onClick:o[2]||(o[2]=e=>i.dialog=!1)},{default:(0,t.k6)((()=>[(0,t.eW)("Cancelar")])),_:1}),(0,t.bF)(K.h),(0,t.bF)(a.D,{color:"success",variant:"flat","append-icon":"mdi-check",loading:i.isLoading,disabled:!n.protocolReady,onClick:o[3]||(o[3]=e=>n.postProtocol())},{default:(0,t.k6)((()=>[(0,t.eW)("Adcionar")])),_:1},8,["loading","disabled"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}var Y={name:"AddProtocol",components:{ProtocolForm:j},props:{eoitypes:{type:Array,required:!0}},setup(){const e=(0,q.E)(),o=(0,T.T)();return{accountStore:e,generalStore:o}},data(){return{dialog:!1,isLoading:!1,formValid:!1,protocol:{date_min:"",date_max:"",eoi:{name:null,number:null},observations:[]}}},computed:{protocolReady(){const e=this.protocol.observations.length>0,o=this.protocol.observations.every((e=>e.iterations.length>0));return e&&o&&this.formValid}},methods:{reset(){this.protocol={date_min:"",date_max:"",eoi:{name:null,number:null},observations:[]}},async postProtocol(){this.isLoading=!0,await U.A.request({url:"api/protocols",method:"POST",data:this.protocol,headers:{Authorization:`Bearer ${this.accountStore.account.token}`}}).then((()=>{this.isLoading=!1,this.generalStore.successSnackbar("Protocolo adicionado com sucesso"),this.$emit("refresh"),this.dialog=!1})).catch((e=>{console.error(e),this.isLoading=!1,this.generalStore.errorSnackbar("Erro ao adicionar o protocolo")}))}}};const ee=(0,B.A)(Y,[["render",Z]]);var oe=ee,le={name:"ProtocolsView",components:{ProtocolCard:z,ProtocolEdit:H,AddProtocol:oe},data(){return{protocols:[],isLoading:!1,filter:{name:null},eoiTypes:[],editDialog:!1,protocolSelected:null}},setup(){const e=(0,q.E)(),o=(0,T.T)();return{accountStore:e,generalStore:o}},computed:{sheetHeight(){return window.innerHeight-200},protocolsToShow(){return this.filter.name?this.protocols.filter((e=>e.name.includes(this.filter.name))):this.protocols}},methods:{async getProtocols(){await new Promise((e=>setTimeout(e,2e3))),await U.A.request({method:"GET",url:"api/protocols",headers:{Authorization:`Bearer ${this.accountStore.account.token}`}}).then((e=>{this.protocols=e.data})).catch((e=>{console.error(e),this.generalStore.errorSnackbar("Erro ao buscar os protocolos"),this.isLoading=!1}))},async getEoiTypes(){await U.A.request({url:"api/eoitypes",method:"GET",headers:{Authorization:"Bearer "+this.accountStore.account.token}}).then((e=>{this.eoiTypes=e.data})).catch((e=>{console.error(e),this.isLoading=!1}))},handleClickEdit(e){this.protocolSelected=JSON.parse(JSON.stringify(e)),this.editDialog=!0,console.log(e),console.log(this.protocolSelected)},async refreshProtocols(){this.isLoading=!0,await this.getProtocols(),this.isLoading=!1}},async mounted(){this.isLoading=!0,await Promise.all([this.getProtocols(),this.getEoiTypes()]),this.isLoading=!1}};const te=(0,B.A)(le,[["render",m],["__scopeId","data-v-99050794"]]);var ae=te},1161:function(e,o,l){l.d(o,{y:function(){return b}});var t=l(6768),a=l(8856),r=l(1950),i=l(2067),n=l(2876),s=l(144),d=l(4587),c=l(9094),u=l(1247),m=l(7861),p=l(4600);const h=(0,d.j)({id:String,text:String,...(0,c.cJ)((0,a.D)({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),b=(0,u.RW)()({name:"VTooltip",props:h(),emits:{"update:modelValue":e=>!0},setup(e,o){let{slots:l}=o;const d=(0,i.q)(e,"modelValue"),{scopeId:c}=(0,n.b)(),u=(0,m.v6)(),h=(0,t.EW)((()=>e.id||`v-tooltip-${u}`)),b=(0,s.KR)(),y=(0,t.EW)((()=>e.location.split(" ").length>1?e.location:e.location+" center")),f=(0,t.EW)((()=>"auto"===e.origin||"overlap"===e.origin||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center")),v=(0,t.EW)((()=>e.transition?e.transition:d.value?"scale-transition":"fade-transition")),g=(0,t.EW)((()=>(0,t.v6)({"aria-describedby":h.value},e.activatorProps)));return(0,p.C)((()=>{const o=a.L.filterProps(e);return(0,t.bF)(a.L,(0,t.v6)({ref:b,class:["v-tooltip",e.class],style:e.style,id:h.value},o,{modelValue:d.value,"onUpdate:modelValue":e=>d.value=e,transition:v.value,absolute:!0,location:y.value,origin:f.value,persistent:!0,role:"tooltip",activatorProps:g.value,_disableGlobalStack:!0},c),{activator:l.activator,default:function(){for(var o=arguments.length,t=new Array(o),a=0;a<o;a++)t[a]=arguments[a];return l.default?.(...t)??e.text}})})),(0,r.O)({},b)}})}}]);
//# sourceMappingURL=protocols.352a4cf8.js.map