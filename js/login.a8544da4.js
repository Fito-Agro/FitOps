"use strict";(self["webpackChunkfitoagro_backoffice"]=self["webpackChunkfitoagro_backoffice"]||[]).push([[966],{7847:function(e,a,t){t.r(a),t.d(a,{default:function(){return F}});var n=t(6768),o=t(3835),s=t(2807),r=t(4593),i=t(697),l=t(1560),d=t(3813),u=t(6756),c=t(5526),m=t(9669),p=t(5126),f=t(3948);const g=e=>((0,n.Qi)("data-v-25ef3927"),e=e(),(0,n.jt)(),e),h=g((()=>(0,n.Lk)("div",{class:"text-subtitle-1 text-medium-emphasis"},"Conta",-1))),b=g((()=>(0,n.Lk)("div",{class:"text-subtitle-1 text-medium-emphasis d-flex align-center justify-space-between"},[(0,n.eW)(" Senha "),(0,n.Lk)("a",{class:"text-caption text-decoration-none text-secondary",href:"#/forgot_password",rel:"noopener noreferrer",target:"_parent"}," Esqueceu-se da sua senha")],-1))),k={class:"text-secondary text-decoration-none",href:"#/register",rel:"noopener noreferrer",target:"_parent"};function v(e,a,t,g,v,y){return(0,n.uX)(),(0,n.Wv)(d.I,{fluid:"",class:"fill-height hero"},{default:(0,n.k6)((()=>[(0,n.bF)(u.L,null,{default:(0,n.k6)((()=>[(0,n.bF)(c.B,{class:"d-flex justify-center"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",null,[(0,n.bF)(p.y,{class:"mx-auto my-6","max-width":"228",src:o}),(0,n.bF)(r.J,{class:"mx-auto pa-12 pb-8",elevation:"8",width:"28rem",rounded:"lg"},{default:(0,n.k6)((()=>[(0,n.bF)(l.n,{modelValue:v.formValid,"onUpdate:modelValue":a[3]||(a[3]=e=>v.formValid=e),"lazy-validation":"",ref:"form"},{default:(0,n.k6)((()=>[h,(0,n.bF)(f.W,{modelValue:v.username,"onUpdate:modelValue":a[0]||(a[0]=e=>v.username=e),modelModifiers:{trim:!0},rules:v.rules.username,density:"compact",placeholder:"Nome de Utilizador","prepend-inner-icon":"mdi-account-outline",variant:"outlined"},null,8,["modelValue","rules"]),b,(0,n.bF)(f.W,{modelValue:v.password,"onUpdate:modelValue":a[1]||(a[1]=e=>v.password=e),modelModifiers:{trim:!0},rules:v.rules.password,"append-inner-icon":v.visible?"mdi-eye-off":"mdi-eye",type:v.visible?"text":"password",density:"compact",placeholder:"Insira a sua senha","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":a[2]||(a[2]=e=>v.visible=!v.visible)},null,8,["modelValue","rules","append-inner-icon","type"])])),_:1},8,["modelValue"]),(0,n.bF)(s.D,{block:"",class:"my-8",color:"primary",size:"large",variant:"tonal",loading:v.isLoading,onClick:a[4]||(a[4]=e=>y.login())},{default:(0,n.k6)((()=>[(0,n.eW)(" Autenticar ")])),_:1},8,["loading"]),(0,n.bF)(i.O,{class:"text-center"},{default:(0,n.k6)((()=>[(0,n.Lk)("a",k,[(0,n.eW)(" Registar aqui "),(0,n.bF)(m.w,{icon:"mdi-chevron-right"})])])),_:1})])),_:1})])])),_:1})])),_:1})])),_:1})}t(4114);var y=t(501),_=t(6044),w=t(8355),x={name:"Login",setup(){const e=(0,y.T)(),a=(0,_.E)();return{generalStore:e,accountStore:a}},data(){return{isLoading:!1,error:!1,visible:!1,formValid:!1,username:"",password:"",rules:{username:[e=>!!e||"Insira o nome de utilizador"],password:[e=>!!e||"Insira a senha"]}}},methods:{async login(){const{valid:e}=await this.$refs.form.validate();e&&(this.isLoading=!0,await w.A.post("/api/token",{agent_username:this.username.trim(),agent_password:this.password.trim()}).then((e=>{if(console.log(e),200===e.status){let a={id:e.data.id,username:e.data.username,token:e.data.token,role:e.data.role,organization:e.data.organization_id,permissions:e.data.permissions};this.accountStore.setAccount(a),this.isLoading=!1,this.generalStore.successSnackbar("Autenticado com sucesso!"),this.$router.push("/")}})).catch((e=>{this.isLoading=!1,console.log(e.response),this.generalStore.errorSnackbar(e.response.data.error)})))}}},V=t(1241);const L=(0,V.A)(x,[["render",v],["__scopeId","data-v-25ef3927"]]);var F=L},3835:function(e,a,t){e.exports=t.p+"img/fitoagro_logo.616834f3.png"},3813:function(e,a,t){t.d(a,{I:function(){return c}});var n=t(6768),o=(t(5792),t(9262)),s=t(5296),r=t(4663),i=t(4587),l=t(1247),d=t(4600);const u=(0,i.j)({fluid:{type:Boolean,default:!1},...(0,o.u)(),...(0,r.X)()},"VContainer"),c=(0,l.RW)()({name:"VContainer",props:u(),setup(e,a){let{slots:t}=a;const{rtlClasses:o}=(0,s.IA)();return(0,d.C)((()=>(0,n.bF)(e.tag,{class:["v-container",{"v-container--fluid":e.fluid},o.value,e.class],style:e.style},t))),{}}})}}]);
//# sourceMappingURL=login.a8544da4.js.map