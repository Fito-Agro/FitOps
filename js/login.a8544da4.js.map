{"version":3,"file":"js/login.a8544da4.js","mappings":"mXAoBcA,EAAAA,EAAAA,IAA6D,OAAxDC,MAAM,wCAAuC,SAAK,K,UAWvDD,EAAAA,EAAAA,IAaM,OAZJC,MAAM,kFAAgF,EAhCtGC,EAAAA,EAAAA,IAiCe,YAGCF,EAAAA,EAAAA,IAM8B,KAL5BC,MAAM,mDACNE,KAAK,oBACLC,IAAI,sBACJC,OAAO,WACR,+BACyB,K,GA8B1BJ,MAAM,sCACNE,KAAK,aACLC,IAAI,sBACJC,OAAO,W,0CA1ErBC,EAAAA,EAAAA,IAoFcC,EAAAA,EAAA,CApFDC,MAAA,GAAMP,MAAM,oB,CAD3BQ,SAAAC,EAAAA,EAAAA,KAEI,IAkFQ,EAlFRC,EAAAA,EAAAA,IAkFQC,EAAAA,EAAA,MApFZH,SAAAC,EAAAA,EAAAA,KAGM,IAgFQ,EAhFRC,EAAAA,EAAAA,IAgFQE,EAAAA,EAAA,CAhFDZ,MAAM,yBAAuB,CAH1CQ,SAAAC,EAAAA,EAAAA,KAIQ,IA8EM,EA9ENV,EAAAA,EAAAA,IA8EM,aA7EJW,EAAAA,EAAAA,IAISG,EAAAA,EAAA,CAHPb,MAAM,eACN,YAAU,MACVc,IAAAC,KAEFL,EAAAA,EAAAA,IAuESM,EAAAA,EAAA,CAtEPhB,MAAM,qBACNiB,UAAU,IACVC,MAAM,QACNC,QAAQ,M,CAdpBX,SAAAC,EAAAA,EAAAA,KAmBY,IAsCS,EAtCTC,EAAAA,EAAAA,IAsCSU,EAAAA,EAAA,CAzDrBC,WAmB6BC,EAAAC,UAnB7B,sBAAAC,EAAA,KAAAA,EAAA,GAAAC,GAmB6BH,EAAAC,UAASE,GAAE,qBAAgBC,IAAI,Q,CAnB5DlB,SAAAC,EAAAA,EAAAA,KAoBc,IAA6D,CAA7DkB,GAEAjB,EAAAA,EAAAA,IAOgBkB,EAAAA,EAAA,CA7B9BP,WAuB8BC,EAAAO,SAvB9B,sBAAAL,EAAA,KAAAA,EAAA,GAAAC,GAuB8BH,EAAAO,SAAQJ,GAvBtCK,eAuBgB,CAAAC,MAAA,GACCC,MAAOV,EAAAU,MAAMH,SACdI,QAAQ,UACRC,YAAY,qBACZ,qBAAmB,sBACnBC,QAAQ,Y,+BAGVC,GAeA1B,EAAAA,EAAAA,IAUgBkB,EAAAA,EAAA,CAxD9BP,WA+C8BC,EAAAe,SA/C9B,sBAAAb,EAAA,KAAAA,EAAA,GAAAC,GA+C8BH,EAAAe,SAAQZ,GA/CtCK,eA+CgB,CAAAC,MAAA,GACCC,MAAOV,EAAAU,MAAMK,SACb,oBAAmBf,EAAAgB,QAAU,cAAgB,UAC7CC,KAAMjB,EAAAgB,QAAU,OAAS,WAC1BL,QAAQ,UACRC,YAAY,qBACZ,qBAAmB,mBACnBC,QAAQ,WACP,sBAAkBX,EAAA,KAAAA,EAAA,GAAAC,GAAEH,EAAAgB,SAAWhB,EAAAgB,U,6DAvDhDE,EAAA,G,mBA0DY9B,EAAAA,EAAAA,IAUQ+B,EAAAA,EAAA,CATNC,MAAA,GACA1C,MAAM,OACN2C,MAAM,UACNC,KAAK,QACLT,QAAQ,QACPU,QAASvB,EAAAwB,UACTC,QAAKvB,EAAA,KAAAA,EAAA,GAAAC,GAAEuB,EAAAC,U,CAjEtBzC,SAAAC,EAAAA,EAAAA,KAkEa,IAED,EApEZR,EAAAA,EAAAA,IAkEa,mBAlEbuC,EAAA,G,gBAsEY9B,EAAAA,EAAAA,IAUcwC,EAAAA,EAAA,CAVDlD,MAAM,eAAa,CAtE5CQ,SAAAC,EAAAA,EAAAA,KAuEc,IAOI,EAPJV,EAAAA,EAAAA,IAOI,IAPJoD,EAOI,EA9ElBlD,EAAAA,EAAAA,IA4Ee,oBACeS,EAAAA,EAAAA,IAA0C0C,EAAAA,EAAA,CAAlCC,KAAK,2BA7E3Cb,EAAA,OAAAA,EAAA,SAAAA,EAAA,OAAAA,EAAA,OAAAA,EAAA,G,0CA6FA,GACEc,KAAM,QAENC,KAAAA,GACE,MAAMC,GAAeC,EAAAA,EAAAA,KACfC,GAAeC,EAAAA,EAAAA,KACrB,MAAO,CAAEH,eAAcE,eACzB,EACAE,IAAAA,GACE,MAAO,CACLd,WAAW,EACXe,OAAO,EACPvB,SAAS,EACTf,WAAW,EACXM,SAAU,GACVQ,SAAU,GACVL,MAAO,CACLH,SAAU,CACPiC,KAAQA,GAAK,+BAQhBzB,SAAU,CACPyB,KAAQA,GAAK,mBAMtB,EACAC,QAAS,CACP,WAAMd,GACJ,MAAM,MAAEe,SAAgBC,KAAKC,MAAMC,KAAKC,WACnCJ,IAGLC,KAAKnB,WAAY,QACXuB,EAAAA,EACHC,KAAK,aAAc,CAClBC,eAAgBN,KAAKpC,SAASE,OAC9ByC,eAAgBP,KAAK5B,SAASN,SAE/B0C,MAAMC,IAEL,GADAC,QAAQC,IAAIF,GACY,MAApBA,EAASG,OAAgB,CAC3B,IAAIC,EAAW,CACbC,GAAIL,EAASd,KAAKmB,GAClBlD,SAAU6C,EAASd,KAAK/B,SACxBmD,MAAON,EAASd,KAAKoB,MACrBC,KAAMP,EAASd,KAAKqB,KACpBC,aAAcR,EAASd,KAAKuB,gBAC5BC,YAAaV,EAASd,KAAKwB,aAE7BnB,KAAKP,aAAa2B,WAAWP,GAC7Bb,KAAKnB,WAAY,EACjBmB,KAAKT,aAAa8B,gBAAgB,4BAClCrB,KAAKsB,QAAQC,KAAK,IACpB,KAEDC,OAAO5B,IACNI,KAAKnB,WAAY,EACjB6B,QAAQC,IAAIf,EAAMa,UAClBT,KAAKT,aAAakC,cAAc7B,EAAMa,SAASd,KAAKC,MAAM,IAMhE,I,UC9JJ,MAAM8B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O,gNCEO,MAAMC,GAAsBC,EAAAA,EAAAA,GAAa,CAC9CvF,MAAO,CACLgC,KAAMwD,QACNvF,SAAS,OAGRwF,EAAAA,EAAAA,SACAC,EAAAA,EAAAA,MACF,cAEUC,GAAaC,EAAAA,EAAAA,KAAAA,CAAmB,CAC3C7C,KAAM,aAEN8C,MAAOP,IAEPtC,KAAAA,CAAO6C,EAAKC,GAAa,IAAX,MAAEC,GAAOD,EACrB,MAAM,WAAEE,IAAeC,EAAAA,EAAAA,MAevB,OAbAC,EAAAA,EAAAA,IAAU,KAAA/F,EAAAA,EAAAA,IAAA0F,EAAAM,IAAA,OAEC,CACL,cACA,CAAE,qBAAsBN,EAAM7F,OAC9BgG,EAAWI,MACXP,EAAMpG,OACP,MACOoG,EAAMQ,OACJN,KAIP,CAAC,CACV,G","sources":["webpack://fitoagro_backoffice/./src/views/LoginView.vue","webpack://fitoagro_backoffice/./src/views/LoginView.vue?5755","webpack://fitoagro_backoffice/../../../src/components/VGrid/VContainer.tsx"],"sourcesContent":["<template>\r\n  <v-container fluid class=\"fill-height hero\">\r\n    <v-row>\r\n      <v-col class=\"d-flex justify-center\">\r\n        <div>\r\n          <v-img\r\n            class=\"mx-auto my-6\"\r\n            max-width=\"228\"\r\n            src=\"../assets/fitoagro_logo.png\"\r\n          ></v-img>\r\n          <v-card\r\n            class=\"mx-auto pa-12 pb-8\"\r\n            elevation=\"8\"\r\n            width=\"28rem\"\r\n            rounded=\"lg\"\r\n          >\r\n            <!-- <v-alert v-show=\"error\" type=\"error\" variant=\"tonal\"\r\n              >Credencias erradas</v-alert\r\n            > -->\r\n            <v-form v-model=\"formValid\" lazy-validation ref=\"form\">\r\n              <div class=\"text-subtitle-1 text-medium-emphasis\">Conta</div>\r\n\r\n              <v-text-field\r\n                v-model.trim=\"username\"\r\n                :rules=\"rules.username\"\r\n                density=\"compact\"\r\n                placeholder=\"Nome de Utilizador\"\r\n                prepend-inner-icon=\"mdi-account-outline\"\r\n                variant=\"outlined\"\r\n              ></v-text-field>\r\n\r\n              <div\r\n                class=\"text-subtitle-1 text-medium-emphasis d-flex align-center justify-space-between\"\r\n              >\r\n                Senha\r\n\r\n                <a\r\n                  class=\"text-caption text-decoration-none text-secondary\"\r\n                  href=\"#/forgot_password\"\r\n                  rel=\"noopener noreferrer\"\r\n                  target=\"_parent\"\r\n                >\r\n                  Esqueceu-se da sua senha</a\r\n                >\r\n              </div>\r\n\r\n              <v-text-field\r\n                v-model.trim=\"password\"\r\n                :rules=\"rules.password\"\r\n                :append-inner-icon=\"visible ? 'mdi-eye-off' : 'mdi-eye'\"\r\n                :type=\"visible ? 'text' : 'password'\"\r\n                density=\"compact\"\r\n                placeholder=\"Insira a sua senha\"\r\n                prepend-inner-icon=\"mdi-lock-outline\"\r\n                variant=\"outlined\"\r\n                @click:append-inner=\"visible = !visible\"\r\n              ></v-text-field>\r\n            </v-form>\r\n            <v-btn\r\n              block\r\n              class=\"my-8\"\r\n              color=\"primary\"\r\n              size=\"large\"\r\n              variant=\"tonal\"\r\n              :loading=\"isLoading\"\r\n              @click=\"login()\"\r\n            >\r\n              Autenticar\r\n            </v-btn>\r\n\r\n            <v-card-text class=\"text-center\">\r\n              <a\r\n                class=\"text-secondary text-decoration-none\"\r\n                href=\"#/register\"\r\n                rel=\"noopener noreferrer\"\r\n                target=\"_parent\"\r\n              >\r\n                Registar aqui <v-icon icon=\"mdi-chevron-right\"></v-icon>\r\n              </a>\r\n              <!-- <v-btn append-icon=\"mdi-chevron-right\" color=\"secondary\" variant=\"plain\" x-small>Registar aqui</v-btn> -->\r\n            </v-card-text>\r\n          </v-card>\r\n        </div>\r\n      </v-col>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { useGeneralStore } from \"@/stores/generalStore\";\r\nimport { useAccountStore } from \"@/stores/accountStore\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"Login\",\r\n\r\n  setup() {\r\n    const generalStore = useGeneralStore();\r\n    const accountStore = useAccountStore();\r\n    return { generalStore, accountStore };\r\n  },\r\n  data() {\r\n    return {\r\n      isLoading: false,\r\n      error: false,\r\n      visible: false,\r\n      formValid: false,\r\n      username: \"\",\r\n      password: \"\",\r\n      rules: {\r\n        username: [\r\n          (v) => !!v || \"Insira o nome de utilizador\",\r\n          // (v) =>\r\n          //   (v && v.length >= 3) ||\r\n          //   \"O nome de utilizador deve ter pelo menos 3 caracteres\",\r\n          // (v) =>\r\n          //   (v && v.length <= 20) ||\r\n          //   \"O nome de utilizador deve ter no máximo 20 caracteres\",\r\n        ],\r\n        password: [\r\n          (v) => !!v || \"Insira a senha\",\r\n          // (v) =>\r\n          //   (v && v.length <= 20) || \"A senha deve ter no máximo 20 caracteres\",\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    async login() {\r\n      const { valid } = await this.$refs.form.validate(); //get valid field from object returned by validate method\r\n      if (!valid) {\r\n        return;\r\n      }\r\n      this.isLoading = true;\r\n      await axios\r\n        .post(\"/api/token\", {\r\n          agent_username: this.username.trim(),\r\n          agent_password: this.password.trim(),\r\n        })\r\n        .then((response) => {\r\n          console.log(response);\r\n          if (response.status === 200) {\r\n            let _account = {\r\n              id: response.data.id,\r\n              username: response.data.username,\r\n              token: response.data.token,\r\n              role: response.data.role,\r\n              organization: response.data.organization_id,\r\n              permissions: response.data.permissions,\r\n            };\r\n            this.accountStore.setAccount(_account);\r\n            this.isLoading = false;\r\n            this.generalStore.successSnackbar(\"Autenticado com sucesso!\");\r\n            this.$router.push(\"/\");\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          this.isLoading = false;\r\n          console.log(error.response);\r\n          this.generalStore.errorSnackbar(error.response.data.error);\r\n          // if (error.response.status === 401) {\r\n          //   console.log(\"Invalid credentials\");\r\n          //   this.error = true;\r\n          // }\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.hero {\r\n  background: url(\"../assets/crops_bg.jpg\") no-repeat center center;\r\n  background-size: cover;\r\n}\r\n</style>\r\n","import { render } from \"./LoginView.vue?vue&type=template&id=25ef3927&scoped=true\"\nimport script from \"./LoginView.vue?vue&type=script&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&lang=js\"\n\nimport \"./LoginView.vue?vue&type=style&index=0&id=25ef3927&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-25ef3927\"]])\n\nexport default __exports__","// Styles\nimport './VGrid.sass'\n\n// Composables\nimport { makeComponentProps } from '@/composables/component'\nimport { useRtl } from '@/composables/locale'\nimport { makeTagProps } from '@/composables/tag'\n\n// Utilities\nimport { genericComponent, propsFactory, useRender } from '@/util'\n\nexport const makeVContainerProps = propsFactory({\n  fluid: {\n    type: Boolean,\n    default: false,\n  },\n\n  ...makeComponentProps(),\n  ...makeTagProps(),\n}, 'VContainer')\n\nexport const VContainer = genericComponent()({\n  name: 'VContainer',\n\n  props: makeVContainerProps(),\n\n  setup (props, { slots }) {\n    const { rtlClasses } = useRtl()\n\n    useRender(() => (\n      <props.tag\n        class={[\n          'v-container',\n          { 'v-container--fluid': props.fluid },\n          rtlClasses.value,\n          props.class,\n        ]}\n        style={ props.style }\n        v-slots={ slots }\n      />\n    ))\n\n    return {}\n  },\n})\n\nexport type VContainer = InstanceType<typeof VContainer>\n"],"names":["_createElementVNode","class","_createTextVNode","href","rel","target","_createBlock","_component_v_container","fluid","default","_withCtx","_createVNode","_component_v_row","_component_v_col","_component_v_img","src","_imports_0","_component_v_card","elevation","width","rounded","_component_v_form","modelValue","$data","formValid","_cache","$event","ref","_hoisted_1","_component_v_text_field","username","modelModifiers","trim","rules","density","placeholder","variant","_hoisted_2","password","visible","type","_","_component_v_btn","block","color","size","loading","isLoading","onClick","$options","login","_component_v_card_text","_hoisted_3","_component_v_icon","icon","name","setup","generalStore","useGeneralStore","accountStore","useAccountStore","data","error","v","methods","valid","this","$refs","form","validate","axios","post","agent_username","agent_password","then","response","console","log","status","_account","id","token","role","organization","organization_id","permissions","setAccount","successSnackbar","$router","push","catch","errorSnackbar","__exports__","render","makeVContainerProps","propsFactory","Boolean","makeComponentProps","makeTagProps","VContainer","genericComponent","props","_ref","slots","rtlClasses","useRtl","useRender","tag","value","style"],"sourceRoot":""}