"use strict";(self["webpackChunkfitoagro_backoffice"]=self["webpackChunkfitoagro_backoffice"]||[]).push([[224],{8335:function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var o=n(6768),a=n(3835),l=n(2239),i=n(2807),s=n(4593),r=n(697),d=n(3745),u=n(1606),c=n(1772),m=n(7511),p=n(1560),h=n(3813),f=n(6756),g=n(5526),v=n(1720),b=n(9669),y=n(5126),V=n(105),w=n(3948),_=n(6048),k=n(1781);const x=e=>((0,o.Qi)("data-v-31801ece"),e=e(),(0,o.jt)(),e),F=x((()=>(0,o.Lk)("span",{class:"text-subtitle-1 text-medium-emphasis"}," Tipo de Conta* ",-1))),L=x((()=>(0,o.Lk)("span",{class:"text-subtitle-1 text-medium-emphasis"}," Organização* ",-1))),S=x((()=>(0,o.Lk)("span",{class:"text-subtitle-1 text-medium-emphasis"}," Nome Pessoal* ",-1))),I=x((()=>(0,o.Lk)("span",{class:"text-subtitle-1 text-medium-emphasis"}," Telemóvel* ",-1))),W=x((()=>(0,o.Lk)("span",{class:"text-subtitle-1 text-medium-emphasis"}," Gmail* ",-1))),C=x((()=>(0,o.Lk)("span",{class:"text-subtitle-1 text-medium-emphasis"}," Cidade* ",-1))),E=x((()=>(0,o.Lk)("span",{class:"text-subtitle-1 text-medium-emphasis"}," Morada* ",-1))),X=x((()=>(0,o.Lk)("span",{class:"text-subtitle-1 text-medium-emphasis"}," Nome de Utilizador* ",-1))),A=x((()=>(0,o.Lk)("span",{class:"text-subtitle-1 text-medium-emphasis"}," Senha* ",-1))),M=x((()=>(0,o.Lk)("span",{class:"text-subtitle-1 text-medium-emphasis"}," Confirmar Senha* ",-1))),z={class:"text-secondary text-decoration-none",href:"#/login",rel:"noopener noreferrer",target:"_parent"},Y=x((()=>(0,o.Lk)("span",null,"Ativação de conta",-1))),O=["innerHTML"];function U(e,t,n,x,U,B){return(0,o.uX)(),(0,o.Wv)(h.I,{fluid:"",class:"fill-height hero"},{default:(0,o.k6)((()=>[(0,o.bF)(f.L,null,{default:(0,o.k6)((()=>[(0,o.bF)(g.B,{class:"d-flex justify-center"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",null,[(0,o.bF)(y.y,{class:"mx-auto my-6","max-width":"228",src:a}),(0,o.bF)(s.J,{class:"pt-12",elevation:"8",width:"450",rounded:"lg"},{default:(0,o.k6)((()=>[(0,o.bF)(_.r3,{modelValue:U.step,"onUpdate:modelValue":t[15]||(t[15]=e=>U.step=e),class:"px-8"},{default:(0,o.k6)((()=>[(0,o.bF)(k.m,null,{default:(0,o.k6)((()=>[(0,o.bF)(r.O,null,{default:(0,o.k6)((()=>[(0,o.bF)(p.n,{modelValue:U.steps[U.step].formValid,"onUpdate:modelValue":t[2]||(t[2]=e=>U.steps[U.step].formValid=e)},{default:(0,o.k6)((()=>[F,(0,o.bF)(V.d4,{modelValue:U.roleSelected,"onUpdate:modelValue":t[0]||(t[0]=e=>U.roleSelected=e),items:U.roles,"item-title":"agenttype_name","return-object":"",color:"secondary",density:"compact",variant:"outlined","prepend-inner-icon":"mdi-account-outline",placeholder:"Selecione o tipo de conta",rules:U.rules.role,disabled:U.isLoadingRoles,loading:U.isLoadingOrgs},null,8,["modelValue","items","rules","disabled","loading"]),L,(0,o.bF)(l.V,{modelValue:U.orgSelected,"onUpdate:modelValue":t[1]||(t[1]=e=>U.orgSelected=e),items:U.organizations,"item-title":"organization_name","return-object":"",color:"secondary",density:"compact",variant:"outlined","prepend-inner-icon":"mdi-domain",placeholder:"Selecione a organização",rules:U.rules.org,disabled:U.isLoadingOrgs},null,8,["modelValue","items","rules","disabled"])])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,o.bF)(k.m,null,{default:(0,o.k6)((()=>[(0,o.bF)(r.O,null,{default:(0,o.k6)((()=>[(0,o.bF)(p.n,{modelValue:U.steps[U.step].formValid,"onUpdate:modelValue":t[8]||(t[8]=e=>U.steps[U.step].formValid=e)},{default:(0,o.k6)((()=>[S,(0,o.bF)(w.W,{class:"ma-1",modelValue:U.name,"onUpdate:modelValue":t[3]||(t[3]=e=>U.name=e),modelModifiers:{trim:!0},rules:U.rules.name,color:"secondary",density:"compact",placeholder:"Insira o nome","prepend-inner-icon":"mdi-card-account-details-outline",variant:"outlined"},null,8,["modelValue","rules"]),I,(0,o.bF)(w.W,{class:"ma-1",modelValue:U.phone,"onUpdate:modelValue":t[4]||(t[4]=e=>U.phone=e),modelModifiers:{trim:!0},rules:U.rules.phone,prefix:"+351",counter:"9",color:"secondary",density:"compact",placeholder:"Insira o seu contacto","prepend-inner-icon":"mdi-phone-outline",variant:"outlined"},null,8,["modelValue","rules"]),W,(0,o.bF)(w.W,{class:"ma-1",modelValue:U.email,"onUpdate:modelValue":t[5]||(t[5]=e=>U.email=e),modelModifiers:{trim:!0},rules:U.rules.email,color:"secondary",density:"compact",placeholder:"Insira o Gmail","prepend-inner-icon":"mdi-gmail",variant:"outlined"},null,8,["modelValue","rules"]),C,(0,o.bF)(w.W,{class:"ma-1",modelValue:U.city,"onUpdate:modelValue":t[6]||(t[6]=e=>U.city=e),modelModifiers:{trim:!0},rules:U.rules.city,color:"secondary",density:"compact",placeholder:"Insira a cidade","prepend-inner-icon":"mdi-city-variant-outline",variant:"outlined"},null,8,["modelValue","rules"]),E,(0,o.bF)(w.W,{class:"ma-1",modelValue:U.address,"onUpdate:modelValue":t[7]||(t[7]=e=>U.address=e),modelModifiers:{trim:!0},rules:U.rules.address,color:"secondary",density:"compact",placeholder:"Insira a morada","prepend-inner-icon":"mdi-map-marker-outline",variant:"outlined"},null,8,["modelValue","rules"])])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,o.bF)(k.m,null,{default:(0,o.k6)((()=>[(0,o.bF)(r.O,null,{default:(0,o.k6)((()=>[(0,o.bF)(p.n,{modelValue:U.steps[U.step].formValid,"onUpdate:modelValue":t[14]||(t[14]=e=>U.steps[U.step].formValid=e)},{default:(0,o.k6)((()=>[X,(0,o.bF)(w.W,{class:"ma-1",modelValue:U.username,"onUpdate:modelValue":t[9]||(t[9]=e=>U.username=e),modelModifiers:{trim:!0},rules:U.rules.username,color:"secondary",density:"compact",placeholder:"Insira o nome de utilizador","prepend-inner-icon":"mdi-account-outline",variant:"outlined"},null,8,["modelValue","rules"]),A,(0,o.bF)(w.W,{class:"ma-1 mb-2",modelValue:U.password,"onUpdate:modelValue":t[10]||(t[10]=e=>U.password=e),modelModifiers:{trim:!0},rules:U.rules.password,"append-inner-icon":U.visible?"mdi-eye-off":"mdi-eye",type:U.visible?"text":"password",color:"secondary",density:"compact",placeholder:"Insira a senha","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":t[11]||(t[11]=e=>U.visible=!U.visible)},null,8,["modelValue","rules","append-inner-icon","type"]),M,(0,o.bF)(w.W,{class:"ma-1 mb-2",modelValue:U.confpassword,"onUpdate:modelValue":t[12]||(t[12]=e=>U.confpassword=e),modelModifiers:{trim:!0},rules:U.rules.confpassword,"append-inner-icon":U.confirmVisible?"mdi-eye-off":"mdi-eye",type:U.confirmVisible?"text":"password",color:"secondary",density:"compact",placeholder:"Confirme a senha","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":t[13]||(t[13]=e=>U.confirmVisible=!U.confirmVisible)},null,8,["modelValue","rules","append-inner-icon","type"])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.bF)(f.L,{class:"mb-2"},{default:(0,o.k6)((()=>[(0,o.bF)(g.B,{align:"center"},{default:(0,o.k6)((()=>[(0,o.Lk)("a",z,[(0,o.eW)(" Já tem conta "),(0,o.bF)(b.w,{icon:"mdi-chevron-right"})])])),_:1})])),_:1}),(0,o.bF)(m.G),(0,o.bF)(d.S,null,{default:(0,o.k6)((()=>[U.step>0?((0,o.uX)(),(0,o.Wv)(i.D,{key:0,"prepend-icon":"mdi-chevron-left",variant:"text",onClick:t[16]||(t[16]=e=>U.step--)},{default:(0,o.k6)((()=>[(0,o.eW)(" Anterior ")])),_:1})):(0,o.Q3)("",!0),(0,o.bF)(v.h),U.step<2?((0,o.uX)(),(0,o.Wv)(i.D,{key:1,disabled:!U.steps[U.step].formValid,"append-icon":"mdi-chevron-right",color:"secondary",variant:"flat",onClick:t[17]||(t[17]=e=>U.step++)},{default:(0,o.k6)((()=>[(0,o.eW)(" Próximo ")])),_:1},8,["disabled"])):2===U.step?((0,o.uX)(),(0,o.Wv)(i.D,{key:2,disabled:!U.steps[U.step].formValid,color:"blue",variant:"flat",loading:U.isLoadingPost,onClick:t[18]||(t[18]=e=>B.postAgent())},{default:(0,o.k6)((()=>[(0,o.eW)(" Adicionar ")])),_:1},8,["disabled","loading"])):(0,o.Q3)("",!0)])),_:1})])),_:1})])])),_:1})])),_:1}),(0,o.bF)(c.p,{modelValue:U.dialog,"onUpdate:modelValue":t[20]||(t[20]=e=>U.dialog=e),width:"auto",onAfterLeave:t[21]||(t[21]=e=>B.resetDialog())},{default:(0,o.k6)((()=>[(0,o.bF)(s.J,{width:"500"},{default:(0,o.k6)((()=>[(0,o.bF)(u.r,{class:"bg-warning d-flex justify-space-between align-center"},{default:(0,o.k6)((()=>[Y,(0,o.bF)(i.D,{variant:"text",icon:"mdi-close",onClick:t[19]||(t[19]=e=>U.dialog=!1)})])),_:1}),(0,o.bF)(r.O,null,{default:(0,o.k6)((()=>[(0,o.Lk)("span",{innerHTML:U.dialogMessage},null,8,O)])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}n(4114);var B=n(501),D=n(8355),R={name:"Register",setup(){const e=(0,B.T)();return{generalStore:e}},data(){return{step:0,steps:[{title:"Tipo de Conta e Organização",formValid:!1},{title:"Dados Pessoais",formValid:!1},{title:"Dados de Conta",formValid:!1}],isLoadingPost:!1,formValid:!1,visible:!1,confirmVisible:!1,name:null,phone:null,email:null,address:null,city:null,username:null,password:null,confpassword:null,rules:{role:[e=>!!e||"Selecione o tipo de conta"],org:[e=>!!e||"Selecione a organização"],name:[e=>!!e||"Insira o nome",e=>e.length<=20||"Nome muito longo"],phone:[e=>!!e||"Insira o telefone",e=>9===e.length||"Insira um número válido"],email:[e=>!!e||"Insira o gmail",e=>/.+@.+\..+/.test(e)||"Insira um gmail válido"],address:[e=>!!e||"Insira a morada",e=>e.length<=50||"Morada muito longa"],city:[e=>!!e||"Insira a cidade",e=>e.length<=20||"Cidade muito longa"],username:[e=>!!e||"Insira o nome de utilizador",e=>e.length<=20||"Nome de utilizador muito longo"],password:[e=>!!e||"Insira a senha",e=>e.length<=20||"Senha muito longa"],confpassword:[e=>!!e||"Confirme a senha",e=>e===this.password||"As senhas não coincidem"]},roles:[],roleSelected:null,isLoadingRoles:!1,organizations:[],orgSelected:null,isLoadingOrgs:!1,dialog:!1,dialogMessage:""}},computed:{roleName(){return this.roleSelected?.agenttype_name},lasStep(){return this.steps.length-1}},watch:{roleSelected(){this.reset()}},methods:{getRoles(){this.isLoadingRoles=!0,D.A.get("api/agenttypes/roles").then((e=>{this.roles=e.data,this.isLoadingRoles=!1})).catch((e=>{console.log(e)}))},getOrganizations(){this.isLoadingOrgs=!0,D.A.get("api/organizations").then((e=>{this.organizations=e.data.organizations,this.isLoadingOrgs=!1})).catch((e=>{console.log(e)}))},postAgent(){this.isLoadingPost=!0;let e={agenttype_id:this.roleSelected.agenttype_id,organization_id:this.orgSelected?.organization_id,membertype_id:this.memberTypeSelected?.membertype_id,entity_name:this.name.trim(),entity_phone:this.phone.trim(),entity_email:this.email.trim(),entity_address:this.address.trim(),entity_city:this.city.trim(),agent_username:this.username.trim(),agent_password:this.password.trim(),agent_properties:null};console.log(e),D.A.post("/api/agents",e).then((e=>{console.log(e),201===e.status&&(this.isLoadingPost=!1,console.log(e.agent),1==e.data.agent.agenttype_id||3==e.data.agent.agenttype_id?this.openDialog("<span>Verifique o gmail para ativar a sua conta!</span>"):this.openDialog("<span>Conta criada com sucesso!</span></br><span>Aguarde que um Administrador ative a sua conta.</span>"))})).catch((e=>{console.log(e),this.isLoadingPost=!1,this.generalStore.errorSnackbar(e.response.data.error)}))},openDialog(e){this.dialog=!0,this.dialogMessage=e},resetDialog(){this.dialogMessage="",this.$router.push("/login")},reset(){this.name=null,this.phone=null,this.email=null,this.address=null,this.city=null,this.username=null,this.password=null,this.confpassword=null,this.formValid=!1,this.visible=!1,this.confirmVisible=!1,this.orgSelected=null}},mounted(){this.getRoles(),this.getOrganizations()},unmounted(){this.reset()}},H=n(1241);const T=(0,H.A)(R,[["render",U],["__scopeId","data-v-31801ece"]]);var j=T},3835:function(e,t,n){e.exports=n.p+"img/fitoagro_logo.616834f3.png"},6048:function(e,t,n){n.d(t,{r3:function(){return b},qY:function(){return g},DV:function(){return f},ZJ:function(){return v}});n(4114);var o=n(6768),a=n(2807),l=n(9262),i=n(4690),s=n(5296),r=n(4663),d=n(7664),u=n(8567),c=n(144),m=n(4587),p=n(1247),h=n(4600);const f=Symbol.for("vuetify:v-window"),g=Symbol.for("vuetify:v-window-group"),v=(0,m.j)({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>"boolean"===typeof e||"hover"===e},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...(0,l.u)(),...(0,r.X)(),...(0,d.yx)()},"VWindow"),b=(0,p.RW)()({name:"VWindow",directives:{Touch:u.U},props:v(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:l}=(0,d.NX)(e),{isRtl:r}=(0,s.IA)(),{t:u}=(0,s.Ym)(),m=(0,i.dB)(e,g),p=(0,c.KR)(),v=(0,o.EW)((()=>r.value?!e.reverse:e.reverse)),b=(0,c.IJ)(!1),y=(0,o.EW)((()=>{const t="vertical"===e.direction?"y":"x",n=v.value?!b.value:b.value,o=n?"-reverse":"";return`v-window-${t}${o}-transition`})),V=(0,c.IJ)(0),w=(0,c.KR)(void 0),_=(0,o.EW)((()=>m.items.value.findIndex((e=>m.selected.value.includes(e.id)))));(0,o.wB)(_,((e,t)=>{const n=m.items.value.length,o=n-1;b.value=n<=2?e<t:e===o&&0===t||(0!==e||t!==o)&&e<t})),(0,o.Gt)(f,{transition:y,isReversed:b,transitionCount:V,transitionHeight:w,rootRef:p});const k=(0,o.EW)((()=>e.continuous||0!==_.value)),x=(0,o.EW)((()=>e.continuous||_.value!==m.items.value.length-1));function F(){k.value&&m.prev()}function L(){x.value&&m.next()}const S=(0,o.EW)((()=>{const t=[],l={icon:r.value?e.nextIcon:e.prevIcon,class:"v-window__"+(v.value?"right":"left"),onClick:m.prev,"aria-label":u("$vuetify.carousel.prev")};t.push(k.value?n.prev?n.prev({props:l}):(0,o.bF)(a.D,l,null):(0,o.bF)("div",null,null));const i={icon:r.value?e.prevIcon:e.nextIcon,class:"v-window__"+(v.value?"left":"right"),onClick:m.next,"aria-label":u("$vuetify.carousel.next")};return t.push(x.value?n.next?n.next({props:i}):(0,o.bF)(a.D,i,null):(0,o.bF)("div",null,null)),t})),I=(0,o.EW)((()=>{if(!1===e.touch)return e.touch;const t={left:()=>{v.value?F():L()},right:()=>{v.value?L():F()},start:e=>{let{originalEvent:t}=e;t.stopPropagation()}};return{...t,...!0===e.touch?{}:e.touch}}));return(0,h.C)((()=>(0,o.bo)((0,o.bF)(e.tag,{ref:p,class:["v-window",{"v-window--show-arrows-on-hover":"hover"===e.showArrows},l.value,e.class],style:e.style},{default:()=>[(0,o.bF)("div",{class:"v-window__container",style:{height:w.value}},[n.default?.({group:m}),!1!==e.showArrows&&(0,o.bF)("div",{class:"v-window__controls"},[S.value])]),n.additional?.({group:m})]}),[[(0,o.gN)("touch"),I.value]]))),{group:m}}})},1781:function(e,t,n){n.d(t,{m:function(){return b},w:function(){return v}});var o=n(6768),a=n(5130),l=n(9262),i=n(4690),s=n(8139),r=n(6747),d=n(4464),u=n(8567),c=n(144),m=n(4587),p=n(1247),h=n(9094),f=n(4600),g=n(6048);const v=(0,m.j)({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...(0,l.u)(),...(0,i.TX)(),...(0,s.f)()},"VWindowItem"),b=(0,p.RW)()({name:"VWindowItem",directives:{Touch:u.A},props:v(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const l=(0,o.WQ)(g.DV),u=(0,i.aO)(e,g.qY),{isBooted:m}=(0,r.K)();if(!l||!u)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const p=(0,c.IJ)(!1),v=(0,o.EW)((()=>m.value&&(l.isReversed.value?!1!==e.reverseTransition:!1!==e.transition)));function b(){p.value&&l&&(p.value=!1,l.transitionCount.value>0&&(l.transitionCount.value-=1,0===l.transitionCount.value&&(l.transitionHeight.value=void 0)))}function y(){!p.value&&l&&(p.value=!0,0===l.transitionCount.value&&(l.transitionHeight.value=(0,h.Dg)(l.rootRef.value?.clientHeight)),l.transitionCount.value+=1)}function V(){b()}function w(e){p.value&&(0,o.dY)((()=>{v.value&&p.value&&l&&(l.transitionHeight.value=(0,h.Dg)(e.clientHeight))}))}const _=(0,o.EW)((()=>{const t=l.isReversed.value?e.reverseTransition:e.transition;return!!v.value&&{name:"string"!==typeof t?l.transition.value:t,onBeforeEnter:y,onAfterEnter:b,onEnterCancelled:V,onBeforeLeave:y,onAfterLeave:b,onLeaveCancelled:V,onEnter:w}})),{hasContent:k}=(0,s._)(e,u.isSelected);return(0,f.C)((()=>(0,o.bF)(d.M,{transition:_.value,disabled:!m.value},{default:()=>[(0,o.bo)((0,o.bF)("div",{class:["v-window-item",u.selectedClass.value,e.class],style:e.style},[k.value&&n.default?.()]),[[a.aG,u.isSelected.value]])]}))),{groupItem:u}}})},8567:function(e,t,n){n.d(t,{U:function(){return c}});var o=n(9094);const a=e=>{const{touchstartX:t,touchendX:n,touchstartY:o,touchendY:a}=e,l=.5,i=16;e.offsetX=n-t,e.offsetY=a-o,Math.abs(e.offsetY)<l*Math.abs(e.offsetX)&&(e.left&&n<t-i&&e.left(e),e.right&&n>t+i&&e.right(e)),Math.abs(e.offsetX)<l*Math.abs(e.offsetY)&&(e.up&&a<o-i&&e.up(e),e.down&&a>o+i&&e.down(e))};function l(e,t){const n=e.changedTouches[0];t.touchstartX=n.clientX,t.touchstartY=n.clientY,t.start?.({originalEvent:e,...t})}function i(e,t){const n=e.changedTouches[0];t.touchendX=n.clientX,t.touchendY=n.clientY,t.end?.({originalEvent:e,...t}),a(t)}function s(e,t){const n=e.changedTouches[0];t.touchmoveX=n.clientX,t.touchmoveY=n.clientY,t.move?.({originalEvent:e,...t})}function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:e=>l(e,t),touchend:e=>i(e,t),touchmove:e=>s(e,t)}}function d(e,t){const n=t.value,a=n?.parent?e.parentElement:e,l=n?.options??{passive:!0},i=t.instance?.$.uid;if(!a||!i)return;const s=r(t.value);a._touchHandlers=a._touchHandlers??Object.create(null),a._touchHandlers[i]=s,(0,o.HP)(s).forEach((e=>{a.addEventListener(e,s[e],l)}))}function u(e,t){const n=t.value?.parent?e.parentElement:e,a=t.instance?.$.uid;if(!n?._touchHandlers||!a)return;const l=n._touchHandlers[a];(0,o.HP)(l).forEach((e=>{n.removeEventListener(e,l[e])})),delete n._touchHandlers[a]}const c={mounted:d,unmounted:u};t.A=c}}]);
//# sourceMappingURL=register.f92918af.js.map